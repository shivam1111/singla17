<?xml version="1.0" encoding="utf-8"?>
<odoo>
<!--    Stock Line View-->
    <record id="view_stock_line_form" model="ir.ui.view">
        <field name="name">stock.line.form</field>
        <field name="model">stock.line</field>
        <field name="arch" type="xml">
            <form string = "Stock Line" create="false" >
                <header>
                    <field name="state" widget="statusbar"  options="{'clickable':1}" statusbar_visible="stock,heats"/>
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group >
                        <group>
                            <field name = "partner_id" readonly="1" />
                            <field name = "qty" readonly="1"/>
                            <field name = "purchase_id" readonly="1"/>
                            <field name = "date" options="{'format': 'dd/MM/yyyy'}" readonly="1"/>
                        </group>
                        <group>
                            <field name = "grade_id" readonly="1" />
                            <field name = "type" readonly="1"/>
                            <field name = "truck_no" />
                        </group>
                    </group>
                    <notebook>
                        <page string = "Heats">
                            <field name = "heat_ids" context="{'stock_line':True,'default_truck_no':truck_no,'default_date':date}">
                                <tree string = "Heats">
                    					<field name = "date" />
                    					<field name = "name" />
                    					<field name = "furnace_heat_no" />
                    					<field name = "grade_id" />
                    					<field name =  "grinding" />
                                        <button name="print_heat_report" string="Print Report" type="object" aria-hidden="true" class="fa fa-print"/>
                                </tree>
                            </field>
                            <field name ="remarks" placeholder = "Remarks" nolable = "1" />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

<!--    Stock Line View-->
    <record id="view_stock_line_tree" model="ir.ui.view">
        <field name="name">stock.line.tree</field>
        <field name="model">stock.line</field>
        <field name="arch" type="xml">
            <tree string = "Stock Lines" create="false" >
                <field name = "name"/>
                <field name = "date"/>
                <field name = "purchase_id"/>
                <field name = "partner_id" />
                <field name = "grade_id"/>
                <field name = "qty"/>
            </tree>
        </field>
    </record>

    <!-- Stock Line Filter View -->
    <record id="view_mill_stock_line_filter" model="ir.ui.view">
        <field name="name">mill.stock.line.search</field>
        <field name="model">stock.line</field>
        <field name="arch" type="xml">
            <search string="Search Stock Lines">
                <field name="name" string="Name" filter_domain="[('name','ilike',self)]"/>
                <field name="grade_id" string = "Grade" operator="child_of"/>
                <field name="partner_id" string = "Furnace" operator="child_of"/>
                <filter name = "stock_updated" string = "Stock Updated" domain="[('state','=','stock'),'|',('type','=','purchase'),('type','=','adjustment'),('qty','>','0')]" />
                <filter name = "heats_updated" string = "Stock &amp; Heats Updated" domain="[('state','=','heats'),'|',('type','=','purchase'),('type','=','adjustment'),('qty','>','0')]" />
           </search>
        </field>
    </record>

<!--    Stock Line Action-->
    <record id="action_stock_line" model="ir.actions.act_window">
        <field name="name">Stock Line</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">stock.line</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="view_mill_stock_line_filter"/>
        <field name = "context">{'search_default_stock_updated':1}</field>
    </record>


    <!-- Stock Management Base Menu -->
    <menuitem id = "menu_stock_management"
              name = "Stock Management"
              parent = "mill_order.mill_menu_root"
              sequence = "100" />

    <menuitem
           id= "submenu_stock_line"
           parent= "menu_stock_management"
           sequence= "1"
           action = "action_stock_line"
            />

</odoo>